generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

enum Role {
  ADMIN
  STAFF
  STUDENT
  FACULTY
}

model Account {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  role      Role
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Entity {
  id        String   @id @default(cuid())
  type      String
  createdAt DateTime @default(now())
  values    Value[]
}

model Attribute {
  id       String @id @default(cuid())
  name     String @unique
  dataType String
  values   Value[]
}

model Value {
  id          String   @id @default(cuid())
  entityId    String
  attributeId String

  valueString String?
  valueNumber Float?
  valueBool   Boolean?
  valueDate   DateTime?

  entity    Entity    @relation(fields: [entityId], references: [id], onDelete: Cascade)
  attribute Attribute @relation(fields: [attributeId], references: [id], onDelete: Cascade)

  @@unique([entityId, attributeId])
  @@index([entityId])
  @@index([attributeId])
}
